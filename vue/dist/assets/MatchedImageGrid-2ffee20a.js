import{d as z,r as v,J as V,b0 as A,ad as D,K as G,L as N,a,N as o,M as e,ac as _,V as x,U as k,R as B,br as F,S as R,a0 as U}from"./index-ea5c2aef.js";import{u as $,b as E,f as q,d as O,i as Q,j,t as H,M as J,S as K}from"./FileItem-2b2d9d61.js";import{g as L}from"./db-76fb7c30.js";import{c as P}from"./copy2clipboard-4a45e2ac.js";import"./index-9e440f03.js";import"./styleChecker-64fe9b7f.js";import"./useTaskListStore-34ada125.js";import"./EyeOutlined-1dc44d5d.js";import"./button-5842320f.js";const W={class:"hint"},X=z({__name:"MatchedImageGrid",props:{tabIdx:null,paneIdx:null,selectedTagIds:null,id:null},setup(w){const c=w,p=v(),u=V(new A);D(()=>c.selectedTagIds,async()=>{var t;const{res:l}=u.pushAction(()=>L(c.selectedTagIds));p.value=(await l).sort((r,d)=>Date.parse(d.date)-Date.parse(r.date)),(t=m.value)==null||t.scrollToItem(0)},{immediate:!0});const m=v(),f={tabIdx:-1,target:"local",paneIdx:-1},{stackViewEl:b}=$().toRefs(),{itemSize:g,gridItems:h}=E(f),{showMenuIdx:n}=q(),{showGenInfo:i,imageGenInfo:I,q:y,onContextMenuClick:M}=O(f,{openNext:F});return(l,t)=>{const r=R,d=J,C=K;return G(),N("div",{class:"container",ref_key:"stackViewEl",ref:b},[a(C,{size:"large",spinning:!u.isIdle},{default:o(()=>[a(d,{visible:e(i),"onUpdate:visible":t[1]||(t[1]=s=>_(i)?i.value=s:null),width:"70vw","mask-closable":"",onOk:t[2]||(t[2]=s=>i.value=!1)},{cancelText:o(()=>[]),default:o(()=>[a(r,{active:"",loading:!e(y).isIdle},{default:o(()=>[x("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto"},onDblclick:t[0]||(t[0]=s=>e(P)(e(I),"copied"))},[x("div",W,k(l.$t("doubleClickToCopy")),1),B(" "+k(e(I)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),a(e(Q),{ref_key:"scroller",ref:m,class:"file-list",items:p.value||[],"item-size":e(g).first,"key-field":"fullpath","item-secondary-size":e(g).second,gridItems:e(h)},{default:o(({item:s,index:S})=>[a(j,{idx:S,file:s,"show-menu-idx":e(n),"onUpdate:showMenuIdx":t[3]||(t[3]=T=>_(n)?n.value=T:null),"full-screen-preview-image-url":e(H)(s),onContextMenuClick:e(M)},null,8,["idx","file","show-menu-idx","full-screen-preview-image-url","onContextMenuClick"])]),_:1},8,["items","item-size","item-secondary-size","gridItems"])]),_:1},8,["spinning"])],512)}}});const le=U(X,[["__scopeId","data-v-b2de5e08"]]);export{le as default};
