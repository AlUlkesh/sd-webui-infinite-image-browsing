import{d as Y,u as ue,g as G,_ as je,c as o,a as ae,P as ee,D as ze,f as Be,w as st,b as ut,e as it,h as $e,M as te,i as ct,j as dt,F as le,A as H,k as mt,r as T,o as C,l as A,m as i,n as r,p as V,q as w,t as O,s as R,v as pt,x as vt,y as ie,z as Fe,B as ft,C as gt,E as bt,G as _t,H as Le,I,J as E,K,L as yt,N as U,O as oe,Q as D,R as Ne,S as ht,T as Ct,U as kt,V as Te,W as Ot,X as xt,Y as Se,Z as wt,$ as $t,a0 as Lt,a1 as St}from"./index-8a9c3393.js";import{D as ce,S as q,s as Mt,a as Pt,b as Et,c as Ve,u as It,d as Dt,e as At,f as jt,g as zt,h as Bt,i as Ft,j as Nt,k as Tt,l as Vt,m as Rt,t as Ut}from"./FileItem-245900ce.js";import{F as B,_ as Xt}from"./index-ef30da66.js";import"./index-072fd5b2.js";import"./index-6dfc4e18.js";import{I as Yt}from"./index-e1fa1836.js";import{M as Re,g as Gt}from"./db-260d1be5.js";import{B as Ue}from"./button-c8ca57b0.js";import"./_baseIteratee-75bdf25b.js";var qt=["class","style"],Wt=function(){return{prefixCls:String,href:String,separator:ee.any,overlay:ee.any,onClick:Function}};const W=Y({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:Wt(),slots:["separator","overlay"],setup:function(t,a){var n=a.slots,l=a.attrs,b=ue("breadcrumb",t),_=b.prefixCls,y=function(L,v){var p=G(n,t,"overlay");return p?o(ce,{overlay:p,placement:"bottom"},{default:function(){return[o("span",{class:"".concat(v,"-overlay-link")},[L,o(ze,null,null)])]}}):L};return function(){var $,L=($=G(n,t,"separator"))!==null&&$!==void 0?$:"/",v=G(n,t),p=l.class,m=l.style,h=je(l,qt),s;return t.href!==void 0?s=o("a",ae({class:"".concat(_.value,"-link"),onClick:t.onClick},h),[v]):s=o("span",ae({class:"".concat(_.value,"-link"),onClick:t.onClick},h),[v]),s=y(s,_.value),v?o("span",{class:p,style:m},[s,L&&o("span",{class:"".concat(_.value,"-separator")},[L])]):null}}});var Ht=function(){return{prefixCls:String,routes:{type:Array},params:ee.any,separator:ee.any,itemRender:{type:Function}}};function Qt(e,t){if(!e.breadcrumbName)return null;var a=Object.keys(t).join("|"),n=e.breadcrumbName.replace(new RegExp(":(".concat(a,")"),"g"),function(l,b){return t[b]||l});return n}function Me(e){var t=e.route,a=e.params,n=e.routes,l=e.paths,b=n.indexOf(t)===n.length-1,_=Qt(t,a);return b?o("span",null,[_]):o("a",{href:"#/".concat(l.join("/"))},[_])}const X=Y({compatConfig:{MODE:3},name:"ABreadcrumb",props:Ht(),slots:["separator","itemRender"],setup:function(t,a){var n=a.slots,l=ue("breadcrumb",t),b=l.prefixCls,_=l.direction,y=function(p,m){return p=(p||"").replace(/^\//,""),Object.keys(m).forEach(function(h){p=p.replace(":".concat(h),m[h])}),p},$=function(p,m,h){var s=ct(p),u=y(m||"",h);return u&&s.push(u),s},L=function(p){var m=p.routes,h=m===void 0?[]:m,s=p.params,u=s===void 0?{}:s,M=p.separator,x=p.itemRender,f=x===void 0?Me:x,S=[];return h.map(function(g){var k=y(g.path,u);k&&S.push(k);var j=[].concat(S),F=null;return g.children&&g.children.length&&(F=o(te,null,{default:function(){return[g.children.map(function(N){return o(te.Item,{key:N.path||N.breadcrumbName},{default:function(){return[f({route:N,params:u,routes:h,paths:$(j,N.path,u)})]}})})]}})),o(W,{overlay:F,separator:M,key:k||g.breadcrumbName},{default:function(){return[f({route:g,params:u,routes:h,paths:j})]}})})};return function(){var v,p,m,h=t.routes,s=t.params,u=s===void 0?{}:s,M=Be(G(n,t)),x=(v=G(n,t,"separator"))!==null&&v!==void 0?v:"/",f=t.itemRender||n.itemRender||Me;h&&h.length>0?m=L({routes:h,params:u,separator:x,itemRender:f}):M.length&&(m=M.map(function(g,k){return st(ut(g.type)==="object"&&(g.type.__ANT_BREADCRUMB_ITEM||g.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),it(g,{separator:x,key:k})}));var S=(p={},$e(p,b.value,!0),$e(p,"".concat(b.value,"-rtl"),_.value==="rtl"),p);return o("div",{class:S},[m])}}});var Jt=["separator","class"],Zt=function(){return{prefixCls:String}};const se=Y({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:Zt(),setup:function(t,a){var n=a.slots,l=a.attrs,b=ue("breadcrumb",t),_=b.prefixCls;return function(){var y;l.separator;var $=l.class,L=je(l,Jt),v=Be((y=n.default)===null||y===void 0?void 0:y.call(n));return o("span",ae({class:["".concat(_.value,"-separator"),$]},L),[v.length>0?v:"/"])}}});X.Item=W;X.Separator=se;X.install=function(e){return e.component(X.name,X),e.component(W.name,W),e.component(se.name,se),e};B.useInjectFormItemContext=dt;B.ItemRest=le;B.install=function(e){return e.component(B.name,B),e.component(B.Item.name,B.Item),e.component(le.name,le),e};q.setDefaultIndicator=Mt;q.install=function(e){return e.component(q.name,q),e};var Kt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.3 506.3L781.7 405.6a7.23 7.23 0 00-11.7 5.7V476H548V254h64.8c6 0 9.4-7 5.7-11.7L517.7 114.7a7.14 7.14 0 00-11.3 0L405.6 242.3a7.23 7.23 0 005.7 11.7H476v222H254v-64.8c0-6-7-9.4-11.7-5.7L114.7 506.3a7.14 7.14 0 000 11.3l127.5 100.8c4.7 3.7 11.7.4 11.7-5.7V548h222v222h-64.8c-6 0-9.4 7-5.7 11.7l100.8 127.5c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7.4-11.7-5.7-11.7H548V548h222v64.8c0 6 7 9.4 11.7 5.7l127.5-100.8a7.3 7.3 0 00.1-11.4z"}}]},name:"drag",theme:"outlined"};const en=Kt;function Pe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable}))),n.forEach(function(l){tn(e,l,a[l])})}return e}function tn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var de=function(t,a){var n=Pe({},t,a.attrs);return o(H,Pe({},n,{icon:en}),null)};de.displayName="DragOutlined";de.inheritAttrs=!1;const nn=de;var rn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"};const an=rn;function Ee(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable}))),n.forEach(function(l){ln(e,l,a[l])})}return e}function ln(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var me=function(t,a){var n=Ee({},t,a.attrs);return o(H,Ee({},n,{icon:an}),null)};me.displayName="FullscreenExitOutlined";me.inheritAttrs=!1;const on=me;var sn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"};const un=sn;function Ie(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable}))),n.forEach(function(l){cn(e,l,a[l])})}return e}function cn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var pe=function(t,a){var n=Ie({},t,a.attrs);return o(H,Ie({},n,{icon:un}),null)};pe.displayName="FullscreenOutlined";pe.inheritAttrs=!1;const dn=pe;var mn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M603.3 327.5l-246 178a7.95 7.95 0 000 12.9l246 178c5.3 3.8 12.7 0 12.7-6.5V643c0-10.2-4.9-19.9-13.2-25.9L457.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"left-circle",theme:"outlined"};const pn=mn;function De(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable}))),n.forEach(function(l){vn(e,l,a[l])})}return e}function vn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ve=function(t,a){var n=De({},t,a.attrs);return o(H,De({},n,{icon:pn}),null)};ve.displayName="LeftCircleOutlined";ve.inheritAttrs=!1;const fn=ve;var gn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M666.7 505.5l-246-178A8 8 0 00408 334v46.9c0 10.2 4.9 19.9 13.2 25.9L566.6 512 421.2 617.2c-8.3 6-13.2 15.6-13.2 25.9V690c0 6.5 7.4 10.3 12.7 6.5l246-178c4.4-3.2 4.4-9.8 0-13z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"right-circle",theme:"outlined"};const bn=gn;function Ae(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable}))),n.forEach(function(l){_n(e,l,a[l])})}return e}function _n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var fe=function(t,a){var n=Ae({},t,a.attrs);return o(H,Ae({},n,{icon:bn}),null)};fe.displayName="RightCircleOutlined";fe.inheritAttrs=!1;const yn=fe;const hn=Y({__name:"folderNavigator",props:{loc:null},emits:["to"],setup(e,{emit:t}){const a=e,n=mt(()=>a.loc),l=T(!1),b=()=>{l.value=!1,t("to",n.value)};return(_,y)=>{const $=Yt,L=Re;return C(),A(R,null,[o(L,{visible:l.value,"onUpdate:visible":y[1]||(y[1]=v=>l.value=v),title:_.$t("inputAddressAndPressEnter"),onOk:b},{default:i(()=>[o($,{onPressEnter:b,value:r(n),"onUpdate:value":y[0]||(y[0]=v=>V(n)?n.value=v:null),style:{width:"100%"},"allow-clear":""},null,8,["value"])]),_:1},8,["visible","title"]),w("a",{style:{"margin-left":"8px"},onClick:y[2]||(y[2]=v=>l.value=!0)},O(_.$t("go")),1)],64)}}});function Cn(e,t,a,n){const l={x:0,y:0};let b=0,_=0,y=typeof(n==null?void 0:n.width)=="number"?n.width:0,$=typeof(n==null?void 0:n.height)=="number"?n.height:0,L=typeof(n==null?void 0:n.left)=="number"?n.left:0,v=typeof(n==null?void 0:n.top)=="number"?n.top:0,p=!1;const m=f=>{f.stopPropagation(),f.preventDefault(),!(!e.value||!t.value)&&(b=f.clientX,_=f.clientY,y=e.value.offsetWidth,$=e.value.offsetHeight,l.x=t.value.offsetLeft,l.y=t.value.offsetTop,document.documentElement.addEventListener("mousemove",h),document.documentElement.addEventListener("mouseup",s))},h=f=>{if(!e.value||!t.value)return;const S=y+f.clientX-b,g=$+f.clientY-_,k=l.x+f.clientX-b,j=l.y+f.clientY-_;e.value.style.width=`${S}px`,e.value.style.height=`${g}px`,t.value.style.left=`${k}px`,t.value.style.top=`${j}px`,n!=null&&n.onResize&&n.onResize(S,g)},s=()=>{document.documentElement.removeEventListener("mousemove",h),document.documentElement.removeEventListener("mouseup",s)},u=f=>{f.stopPropagation(),f.preventDefault(),!(!e.value||!a.value)&&(p=!0,L=e.value.offsetLeft,v=e.value.offsetTop,b=f.clientX,_=f.clientY,document.documentElement.addEventListener("mousemove",M),document.documentElement.addEventListener("mouseup",x))},M=f=>{if(!e.value||!a.value||!p)return;const S=L+f.clientX-b,g=v+f.clientY-_;e.value.style.left=`${S}px`,e.value.style.top=`${g}px`,n!=null&&n.onDrag&&n.onDrag(S,g)},x=()=>{p=!1,document.documentElement.removeEventListener("mousemove",M),document.documentElement.removeEventListener("mouseup",x)};return pt(()=>{!e.value||!n||(typeof n.width=="number"&&(e.value.style.width=`${n.width}px`),typeof n.height=="number"&&(e.value.style.height=`${n.height}px`),typeof n.left=="number"&&(e.value.style.left=`${n.left}px`),typeof n.top=="number"&&(e.value.style.top=`${n.top}px`))}),vt(()=>{document.documentElement.removeEventListener("mousemove",h),document.documentElement.removeEventListener("mouseup",s),document.documentElement.removeEventListener("mousemove",M),document.documentElement.removeEventListener("mouseup",x)}),ie(()=>[e.value,t.value,a.value],([f,S,g])=>{f&&S&&g&&(S.addEventListener("mousedown",m),g.addEventListener("mousedown",u))}),{handleResizeMouseDown:m,handleDragMouseDown:u}}const kn=e=>(Ct("data-v-1c71d760"),e=e(),kt(),e),On={class:"container"},xn={class:"actoion-bar"},wn=kn(()=>w("div",{"flex-placeholder":""},null,-1)),$n={key:0,class:"gen-info"},Ln=Y({__name:"fullScreenContextMenu",props:{file:null,idx:null},emits:["contextMenuClick"],setup(e,{emit:t}){const a=e,n=Fe(),l=T(),b=T([]),_=ft(()=>{var s;return(((s=n.conf)==null?void 0:s.all_custom_tags)??[]).reduce((u,M)=>[...u,{...M,selected:!!b.value.find(x=>x.id===M.id)}],[])}),y=gt(),$=T("");ie(()=>a.file.fullpath,async s=>{y.tasks.forEach(u=>u.cancel()),y.pushAction(()=>bt(s)).res.then(u=>{$.value=u})},{immediate:!0});const L=s=>{s&&y.pushAction(()=>Gt(a.file.fullpath)).res.then(u=>{b.value=u})},v=T(),p=T(),m=_t("fullScreenContextMenu.vue-drag",{left:100,top:100,width:512,height:384,expanded:!0});Cn(l,v,p,{...m.value,onDrag:Le(function(s,u){m.value={...m.value,left:s,top:u}},300),onResize:Le(function(s,u){m.value={...m.value,width:s,height:u}},300)});function h(s){return s.parentNode}return(s,u)=>{const M=Ue,x=Ne,f=ht,S=te,g=ce;return C(),A("div",{ref_key:"el",ref:l,class:oe(["full-screen-menu",{"unset-size":!r(m).expanded}]),onWheelCapture:u[3]||(u[3]=D(()=>{},["stop"]))},[w("div",On,[w("div",xn,[w("div",{ref_key:"dragHandle",ref:p,class:"icon",style:{cursor:"grab"}},[o(r(nn))],512),w("div",{class:"icon",style:{cursor:"pointer"},onClick:u[0]||(u[0]=k=>r(m).expanded=!r(m).expanded)},[r(m).expanded?(C(),I(r(on),{key:0})):(C(),I(r(dn),{key:1}))]),r(m).expanded?(C(),A(R,{key:0},[wn,o(g,{trigger:["hover"],style:{"z-index":"99999"},"get-popup-container":k=>h(k),onVisibleChange:L},{overlay:i(()=>[o(S,{onClick:u[1]||(u[1]=k=>t("contextMenuClick",k,e.file,e.idx)),style:{"z-index":"99999"}},{default:i(()=>[o(x,{key:"send2txt2img"},{default:i(()=>[E(O(s.$t("sendToTxt2img")),1)]),_:1}),o(x,{key:"send2img2img"},{default:i(()=>[E(O(s.$t("sendToImg2img")),1)]),_:1}),o(x,{key:"send2inpaint"},{default:i(()=>[E(O(s.$t("sendToInpaint")),1)]),_:1}),o(x,{key:"send2extras"},{default:i(()=>[E(O(s.$t("sendToExtraFeatures")),1)]),_:1}),o(x,{key:"send2savedDir"},{default:i(()=>[E(O(s.$t("send2savedDir")),1)]),_:1}),o(f,{key:"toggle-tag",title:s.$t("toggleTag")},{default:i(()=>[(C(!0),A(R,null,K(r(_),k=>(C(),I(x,{key:k.id},{default:i(()=>[E(O(k.name)+" ",1),k.selected?(C(),I(r(Pt),{key:0})):(C(),I(r(Et),{key:1}))]),_:2},1024))),128))]),_:1},8,["title"])]),_:1})]),default:i(()=>[o(M,null,{default:i(()=>[E(O(r(yt)("openContextMenu")),1)]),_:1})]),_:1},8,["get-popup-container"]),o(M,{onClick:u[2]||(u[2]=k=>r(Ve)($.value,"copied"))},{default:i(()=>[E(O(s.$t("copyPrompt")),1)]),_:1})],64)):U("",!0)]),r(m).expanded?(C(),A("div",$n,O($.value),1)):U("",!0)]),r(m).expanded?(C(),A("div",{key:0,class:"mouse-sensor",ref_key:"resizeHandle",ref:v},null,512)):U("",!0)],34)}}});const Sn=Te(Ln,[["__scopeId","data-v-1c71d760"]]),Mn={class:"hint"},Pn={class:"location-bar"},En={class:"breadcrumb"},In=["onClick"],Dn={class:"actions"},An=["onClick"],jn={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},zn={key:0,class:"view"},Bn={key:0,class:"preview-switch"},Fn=Y({__name:"stackView",props:{tabIdx:null,paneIdx:null,path:null,walkMode:{type:Boolean},stackKey:null},setup(e){const t=e,a=Fe(),{scroller:n,walkModePath:l,stackViewEl:b,props:_,multiSelectedIdxs:y,spinning:$}=It().toRefs(),{currLocation:L,currPage:v,refresh:p,copyLocation:m,back:h,openNext:s,stack:u,to:M,quickMoveTo:x}=Dt(t),{gridItems:f,sortMethodConv:S,moreActionsDropdownShow:g,sortedFiles:k,sortMethod:j,viewMode:F,viewModeMap:Q,itemSize:N,loadNextDir:ge,loadNextDirLoading:Xe,canLoadNext:Ye,onScroll:Ge}=At(t),{onDrop:qe,onFileDragStart:We}=jt(),{onFileItemClick:He,onContextMenuClick:be,showGenInfo:J,imageGenInfo:_e,q:Qe}=zt(t,{openNext:s}),{previewIdx:Z,onPreviewVisibleChange:Je,previewing:ye,previewImgMove:he,canPreview:Ce}=Bt(t),{showMenuIdx:ne}=Ft();return ie(()=>t,()=>{_.value=t,t.walkMode&&(l.value=t.path);const P=Nt.get(t.stackKey??"");P&&(u.value=P.slice())},{immediate:!0}),(P,d)=>{const Ze=$t,Ke=Lt,et=Re,ke=W,Oe=X,tt=St,nt=Ne,rt=te,xe=ce,re=Xt,at=B,lt=Ue,ot=q;return C(),I(ot,{spinning:r($),size:"large"},{default:i(()=>[o(Ze,{style:{display:"none"}}),w("div",{ref_key:"stackViewEl",ref:b,onDragover:d[15]||(d[15]=D(()=>{},["prevent"])),onDrop:d[16]||(d[16]=D(c=>r(qe)(c),["prevent"])),class:"container"},[o(et,{visible:r(J),"onUpdate:visible":d[1]||(d[1]=c=>V(J)?J.value=c:null),width:"70vw","mask-closable":"",onOk:d[2]||(d[2]=c=>J.value=!1)},{cancelText:i(()=>[]),default:i(()=>[o(Ke,{active:"",loading:!r(Qe).isIdle},{default:i(()=>[w("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:d[0]||(d[0]=c=>r(Ve)(r(_e),"copied"))},[w("div",Mn,O(P.$t("doubleClickToCopy")),1),E(" "+O(r(_e)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),w("div",Pn,[w("div",En,[t.walkMode?(C(),I(tt,{key:0},{title:i(()=>[E(O(P.$t("walk-mode-move-message")),1)]),default:i(()=>[o(Oe,{style:{flex:"1"}},{default:i(()=>[(C(!0),A(R,null,K(r(u),(c,z)=>(C(),I(ke,{key:z},{default:i(()=>[w("span",null,O(c.curr==="/"?P.$t("root"):c.curr.replace(/:\/$/,P.$t("drive"))),1)]),_:2},1024))),128))]),_:1})]),_:1})):(C(),I(Oe,{key:1,style:{flex:"1"}},{default:i(()=>[(C(!0),A(R,null,K(r(u),(c,z)=>(C(),I(ke,{key:z},{default:i(()=>[w("a",{onClick:D(we=>r(h)(z),["prevent"])},O(c.curr==="/"?P.$t("root"):c.curr.replace(/:\/$/,P.$t("drive"))),9,In)]),_:2},1024))),128))]),_:1}))]),w("div",Dn,[w("a",{class:"opt",onClick:d[3]||(d[3]=D((...c)=>r(p)&&r(p)(...c),["prevent"]))},O(P.$t("refresh")),1),o(xe,null,{overlay:i(()=>[o(rt,null,{default:i(()=>[(C(!0),A(R,null,K(r(a).autoCompletedDirList,c=>(C(),I(nt,{key:c.dir},{default:i(()=>[w("a",{onClick:D(z=>r(x)(c.dir),["prevent"])},O(c.zh),9,An)]),_:2},1024))),128))]),_:1})]),default:i(()=>[w("a",{class:"opt",onClick:d[4]||(d[4]=D(()=>{},["prevent"]))},[E(O(P.$t("quickMove"))+" ",1),o(r(ze))])]),_:1}),o(xe,{trigger:["click"],visible:r(g),"onUpdate:visible":d[11]||(d[11]=c=>V(g)?g.value=c:null),placement:"bottomLeft",getPopupContainer:c=>c.parentNode},{overlay:i(()=>[w("div",jn,[o(at,Ot(xt({labelCol:{span:6},wrapperCol:{span:18}})),{default:i(()=>[o(re,{label:P.$t("viewMode")},{default:i(()=>[o(r(Se),{value:r(F),"onUpdate:value":d[6]||(d[6]=c=>V(F)?F.value=c:null),onClick:d[7]||(d[7]=D(()=>{},["stop"])),conv:{value:c=>c,text:c=>r(Q)[c]},options:Object.keys(r(Q))},null,8,["value","conv","options"])]),_:1},8,["label"]),o(re,{label:P.$t("sortingMethod")},{default:i(()=>[o(r(Se),{value:r(j),"onUpdate:value":d[8]||(d[8]=c=>V(j)?j.value=c:null),onClick:d[9]||(d[9]=D(()=>{},["stop"])),conv:r(S),options:Object.keys(r(Tt))},null,8,["value","conv","options"])]),_:1},8,["label"]),o(re,null,{default:i(()=>[w("a",{onClick:d[10]||(d[10]=D((...c)=>r(m)&&r(m)(...c),["prevent"]))},O(P.$t("copyPath")),1),o(hn,{loc:r(L),onTo:r(M)},null,8,["loc","onTo"])]),_:1})]),_:1},16)])]),default:i(()=>[w("a",{class:"opt",onClick:d[5]||(d[5]=D(()=>{},["prevent"]))},O(P.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),r(v)?(C(),A("div",zn,[o(r(Vt),{class:"file-list",items:r(k),ref_key:"scroller",ref:n,onScroll:r(Ge),"item-size":r(N).first,"key-field":"fullpath","item-secondary-size":r(N).second,gridItems:r(f)},wt({default:i(({item:c,index:z})=>[o(Rt,{idx:z,file:c,"full-screen-preview-image-url":r(k)[r(Z)]?r(Ut)(r(k)[r(Z)]):"","show-menu-idx":r(ne),"onUpdate:showMenuIdx":d[12]||(d[12]=we=>V(ne)?ne.value=we:null),selected:r(y).includes(z),"view-mode":r(F),onFileItemClick:r(He),onDragstart:r(We),onPreviewVisibleChange:r(Je),onContextMenuClick:r(be)},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","view-mode","onFileItemClick","onDragstart","onPreviewVisibleChange","onContextMenuClick"])]),_:2},[t.walkMode?{name:"after",fn:i(()=>[o(lt,{onClick:r(ge),loading:r(Xe),block:"",type:"primary",disabled:!r(Ye),ghost:""},{default:i(()=>[E(O(P.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])]),key:"0"}:void 0]),1032,["items","onScroll","item-size","item-secondary-size","gridItems"]),r(ye)?(C(),A("div",Bn,[o(r(fn),{onClick:d[13]||(d[13]=c=>r(he)("prev")),class:oe({disable:!r(Ce)("prev")})},null,8,["class"]),o(r(yn),{onClick:d[14]||(d[14]=c=>r(he)("next")),class:oe({disable:!r(Ce)("next")})},null,8,["class"])])):U("",!0)])):U("",!0)],544),r(ye)?(C(),I(Sn,{key:0,file:r(k)[r(Z)],idx:r(Z),onContextMenuClick:r(be)},null,8,["file","idx","onContextMenuClick"])):U("",!0)]),_:1},8,["spinning"])}}});const Wn=Te(Fn,[["__scopeId","data-v-a683ea61"]]);export{Wn as default};
