import{d as z,r as _,aV as V,a_ as A,n as D,K as G,L as N,c as a,N as o,O as e,Q as v,T as k,U as x,Y as B,aQ as F,a6 as Q,a8 as U}from"./index-8bb7713e.js";import{u as $,b as E,f as O,d as R,h as q,j,k as H,t as K,M as L,S as Y}from"./FileItem-c8b1e15c.js";import{g as J}from"./db-94066177.js";import"./index-f11b4f57.js";import"./button-37307691.js";const P={class:"hint"},W=z({__name:"MatchedImageGrid",props:{tabIdx:null,paneIdx:null,selectedTagIds:null,id:null},setup(w){const c=w,u=_(),p=V(new A);D(()=>c.selectedTagIds,async()=>{var s;const{res:l}=p.pushAction(()=>J(c.selectedTagIds));u.value=(await l).sort((d,r)=>Date.parse(r.date)-Date.parse(d.date)),(s=m.value)==null||s.scrollToItem(0)},{immediate:!0});const m=_(),f={tabIdx:-1,target:"local",paneIdx:-1},{stackViewEl:h}=$().toRefs(),{itemSize:g,gridItems:b}=E(f),{showMenuIdx:n}=O(),{showGenInfo:i,imageGenInfo:I,q:y,onContextMenuClick:M}=R(f,{openNext:F});return(l,s)=>{const d=Q,r=L,C=Y;return G(),N("div",{class:"container",ref_key:"stackViewEl",ref:h},[a(C,{size:"large",spinning:!p.isIdle},{default:o(()=>[a(r,{visible:e(i),"onUpdate:visible":s[1]||(s[1]=t=>v(i)?i.value=t:null),width:"70vw","mask-closable":"",onOk:s[2]||(s[2]=t=>i.value=!1)},{cancelText:o(()=>[]),default:o(()=>[a(d,{active:"",loading:!e(y).isIdle},{default:o(()=>[k("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto"},onDblclick:s[0]||(s[0]=t=>e(q)(e(I),"copied"))},[k("div",P,x(l.$t("doubleClickToCopy")),1),B(" "+x(e(I)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),a(e(j),{ref_key:"scroller",ref:m,class:"file-list",items:u.value||[],"item-size":e(g).first,"key-field":"fullpath","item-secondary-size":e(g).second,gridItems:e(b)},{default:o(({item:t,index:S})=>[a(H,{idx:S,file:t,"show-menu-idx":e(n),"onUpdate:showMenuIdx":s[3]||(s[3]=T=>v(n)?n.value=T:null),"full-screen-preview-image-url":e(K)(t),onContextMenuClick:e(M)},null,8,["idx","file","show-menu-idx","full-screen-preview-image-url","onContextMenuClick"])]),_:1},8,["items","item-size","item-secondary-size","gridItems"])]),_:1},8,["spinning"])],512)}}});const ae=U(W,[["__scopeId","data-v-b2de5e08"]]);export{ae as default};
