import{d as z,r as I,J as V,b0 as A,ad as D,K as G,L as N,a,N as i,M as e,ac as _,V as w,U as x,R as B,br as F,S as R,a0 as U}from"./index-935c2795.js";import{u as $,b as E,f as q,d as O,e as Q,i as j,j as H,t as J,M as K,S as L}from"./FileItem-26f47021.js";import{g as P}from"./db-f3cd9ce7.js";import{c as W}from"./copy2clipboard-27655047.js";import"./index-dd56a761.js";import"./styleChecker-2a3b80e1.js";import"./useTaskListStore-fe69b06c.js";import"./EyeOutlined-f4acc3e8.js";import"./button-190f793c.js";const X={class:"hint"},Y=z({__name:"MatchedImageGrid",props:{tabIdx:null,paneIdx:null,selectedTagIds:null,id:null},setup(k){const u=k,p=I(),m=V(new A);D(()=>u.selectedTagIds,async()=>{var t;const{res:r}=m.pushAction(()=>P(u.selectedTagIds));p.value=(await r).sort((d,c)=>Date.parse(c.date)-Date.parse(d.date)),(t=f.value)==null||t.scrollToItem(0)},{immediate:!0});const f=I(),n={tabIdx:-1,target:"local",paneIdx:-1},{stackViewEl:b}=$().toRefs(),{itemSize:g,gridItems:h}=E(n),{showMenuIdx:l}=q(),{showGenInfo:o,imageGenInfo:v,q:y,onContextMenuClick:M}=O(n,{openNext:F});return Q(n),(r,t)=>{const d=R,c=K,C=L;return G(),N("div",{class:"container",ref_key:"stackViewEl",ref:b},[a(C,{size:"large",spinning:!m.isIdle},{default:i(()=>[a(c,{visible:e(o),"onUpdate:visible":t[1]||(t[1]=s=>_(o)?o.value=s:null),width:"70vw","mask-closable":"",onOk:t[2]||(t[2]=s=>o.value=!1)},{cancelText:i(()=>[]),default:i(()=>[a(d,{active:"",loading:!e(y).isIdle},{default:i(()=>[w("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto"},onDblclick:t[0]||(t[0]=s=>e(W)(e(v),"copied"))},[w("div",X,x(r.$t("doubleClickToCopy")),1),B(" "+x(e(v)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),a(e(j),{ref_key:"scroller",ref:f,class:"file-list",items:p.value||[],"item-size":e(g).first,"key-field":"fullpath","item-secondary-size":e(g).second,gridItems:e(h)},{default:i(({item:s,index:S})=>[a(H,{idx:S,file:s,"show-menu-idx":e(l),"onUpdate:showMenuIdx":t[3]||(t[3]=T=>_(l)?l.value=T:null),"full-screen-preview-image-url":e(J)(s),onContextMenuClick:e(M)},null,8,["idx","file","show-menu-idx","full-screen-preview-image-url","onContextMenuClick"])]),_:1},8,["items","item-size","item-secondary-size","gridItems"])]),_:1},8,["spinning"])],512)}}});const re=U(Y,[["__scopeId","data-v-efd1f8e1"]]);export{re as default};
