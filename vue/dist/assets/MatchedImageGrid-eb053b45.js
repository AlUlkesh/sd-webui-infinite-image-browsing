import{d as U,x as q,o as r,l as _,c as t,m as a,n as e,p as y,q as h,A as E,t as b,B as L,y as M,J as u,I as S,L as O,Q as D}from"./index-4a2169ff.js";import{i as Q,j,t as J,L as H,R as K,k as W,S as X}from"./fullScreenContextMenu-726eab7c.js";import{g as Y,M as Z}from"./db-267adb61.js";import{u as ee}from"./hook-1a4757cd.js";import"./index-aec6f11e.js";import"./_baseIteratee-b77b0e83.js";import"./button-bdfaf6a0.js";const ie={class:"hint"},le={key:1,class:"preview-switch"},se=U({__name:"MatchedImageGrid",props:{tabIdx:null,paneIdx:null,selectedTagIds:null,id:null},setup(V){const m=V,{queue:p,images:l,onContextMenuClickU:v,stackViewEl:T,previewIdx:n,previewing:f,onPreviewVisibleChange:z,previewImgMove:g,canPreview:I,itemSize:k,gridItems:B,showGenInfo:o,imageGenInfo:w,q:$,multiSelectedIdxs:A,onFileItemClick:G,scroller:C,showMenuIdx:d}=ee();return q(()=>m.selectedTagIds,async()=>{var i;const{res:c}=p.pushAction(()=>Y(m.selectedTagIds));l.value=await c,(i=C.value)==null||i.scrollToItem(0)},{immediate:!0}),(c,i)=>{const F=O,N=Z,P=X;return r(),_("div",{class:"container",ref_key:"stackViewEl",ref:T},[t(P,{size:"large",spinning:!e(p).isIdle},{default:a(()=>[t(N,{visible:e(o),"onUpdate:visible":i[1]||(i[1]=s=>y(o)?o.value=s:null),width:"70vw","mask-closable":"",onOk:i[2]||(i[2]=s=>o.value=!1)},{cancelText:a(()=>[]),default:a(()=>[t(F,{active:"",loading:!e($).isIdle},{default:a(()=>[h("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto"},onDblclick:i[0]||(i[0]=s=>e(E)(e(w)))},[h("div",ie,b(c.$t("doubleClickToCopy")),1),L(" "+b(e(w)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),e(l)?(r(),M(e(Q),{key:0,ref_key:"scroller",ref:C,class:"file-list",items:e(l),"item-size":e(k).first,"key-field":"fullpath","item-secondary-size":e(k).second,gridItems:e(B)},{default:a(({item:s,index:x})=>[t(j,{idx:x,file:s,"show-menu-idx":e(d),"onUpdate:showMenuIdx":i[3]||(i[3]=R=>y(d)?d.value=R:null),onFileItemClick:e(G),"full-screen-preview-image-url":e(l)[e(n)]?e(J)(e(l)[e(n)]):"",selected:e(A).includes(x),onContextMenuClick:e(v),onPreviewVisibleChange:e(z)},null,8,["idx","file","show-menu-idx","onFileItemClick","full-screen-preview-image-url","selected","onContextMenuClick","onPreviewVisibleChange"])]),_:1},8,["items","item-size","item-secondary-size","gridItems"])):u("",!0),e(f)?(r(),_("div",le,[t(e(H),{onClick:i[4]||(i[4]=s=>e(g)("prev")),class:S({disable:!e(I)("prev")})},null,8,["class"]),t(e(K),{onClick:i[5]||(i[5]=s=>e(g)("next")),class:S({disable:!e(I)("next")})},null,8,["class"])])):u("",!0)]),_:1},8,["spinning"]),e(f)&&e(l)&&e(l)[e(n)]?(r(),M(W,{key:0,file:e(l)[e(n)],idx:e(n),onContextMenuClick:e(v)},null,8,["file","idx","onContextMenuClick"])):u("",!0)],512)}}});const ue=D(se,[["__scopeId","data-v-2a47e96e"]]);export{ue as default};
